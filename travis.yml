language: node_js

sudo: required

services:
  - docker
before_install:
  - sudo apt-get install jq
  - git clone https://github.com/evannetwork/testcore-config.git
  - docker run -d -p 8546:8546 -p 8545:8545 --name testcore-snapshot -v ./testcore-config/testcore.json:/root/parity/spec.json -u root evannetwork/testcore-snapshot --chain /root/parity/spec.json --jsonrpc-interface all --unsafe-expose
  - export CC="gcc-5" && export CXX="g++-5" && export LINK="gcc-5" && export LINKXX="g++-5"

script:
  - ./syncWatch.sh
  - docker commit testcore-snapshot evannetwork/testcore-snapshot

after_script:
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker push evannetwork/testcore-snapshot

